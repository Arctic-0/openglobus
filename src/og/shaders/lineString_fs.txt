#extension GL_EXT_draw_buffers : require

precision highp float;

uniform vec3 pickingColor;
uniform vec4 color;
uniform vec2 uFloatParams;
uniform vec3 uCamPos;

varying vec3 vPos;

void main(void) {
    vec3 look = vPos - uCamPos;
	float lookLength = length(look);
    float a = color.a * step(lookLength, sqrt(dot(uCamPos,uCamPos) - uFloatParams[0]) + sqrt(dot(vPos,vPos) - uFloatParams[0]));    
    gl_FragData[0] = vec4(color.rgb, a);
    gl_FragData[1] = vec4(pickingColor, 1.0);
}